<!--
  Emma - AI Email Companion Popup Interface
  
  Extension popup HTML that appears when users click the Emma icon
  in the Chrome toolbar. Provides settings management, status display,
  and quick access to extension features.
  
  Features:
  - Extension status and health monitoring
  - Settings and preferences management
  - Current site compatibility display
  - Quick toggle controls for features
  - Help and documentation access
  - Modern responsive design
  
  @version 2.0.0
  @author Emma AI Team
-->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      width: 320px;
      min-height: 400px;
      margin: 0;
      padding: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .popup-header {
      padding: 24px 20px 20px;
      text-align: center;
    }

    .logo {
      width: 48px;
      height: 48px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      margin: 0 auto 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .logo svg {
      width: 24px;
      height: 24px;
      fill: white;
    }

    .title {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 4px;
    }

    .subtitle {
      font-size: 14px;
      opacity: 0.8;
      margin: 0;
    }

    .popup-content {
      background: white;
      color: #1f2937;
      border-radius: 16px 16px 0 0;
      padding: 24px 20px;
      min-height: 300px;
    }

    .feature-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .feature-item {
      display: flex;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .feature-item:last-child {
      border-bottom: none;
    }

    .feature-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .feature-icon svg {
      width: 16px;
      height: 16px;
      fill: white;
    }

    .feature-text {
      flex: 1;
    }

    .feature-title {
      font-size: 14px;
      font-weight: 600;
      margin: 0 0 2px;
      color: #374151;
    }

    .feature-desc {
      font-size: 12px;
      color: #6b7280;
      margin: 0;
    }

    .toggle-switch {
      position: relative;
      width: 40px;
      height: 20px;
      background: #d1d5db;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .toggle-switch.active {
      background: #667eea;
    }

    .toggle-switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 16px;
      height: 16px;
      background: white;
      border-radius: 50%;
      transition: transform 0.3s;
    }

    .toggle-switch.active::after {
      transform: translateX(20px);
    }

    .status-section {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid #f3f4f6;
    }

    .status-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 0;
    }

    .status-label {
      font-size: 13px;
      color: #6b7280;
    }

    .status-value {
      font-size: 13px;
      font-weight: 500;
      color: #374151;
      display: flex;
      align-items: center;
    }

    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-left: 8px;
    }

    .status-indicator.active {
      background: #10b981;
    }

    .status-indicator.inactive {
      background: #ef4444;
    }

    .action-buttons {
      margin-top: 20px;
      display: flex;
      gap: 12px;
    }

    .btn {
      flex: 1;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .btn-secondary {
      background: #f9fafb;
      color: #374151;
      border: 1px solid #e5e7eb;
    }

    .btn-secondary:hover:not(:disabled) {
      background: #f3f4f6;
    }

    .footer {
      padding: 16px 20px;
      text-align: center;
      font-size: 11px;
      color: #6b7280;
      background: #f9fafb;
      border-top: 1px solid #e5e7eb;
    }

    .loading {
      text-align: center;
      padding: 40px 20px;
    }

    .loading-spinner {
      width: 24px;
      height: 24px;
      border: 2px solid #e5e7eb;
      border-top: 2px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 12px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="popup-header">
    <div class="logo">
      <svg viewBox="0 0 24 24">
        <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H11V21H5V3H13V9H21ZM14 15.5C14 14.12 15.12 13 16.5 13S19 14.12 19 15.5 17.88 18 16.5 18 14 16.88 14 15.5ZM16.5 19C18.43 19 20 17.43 20 15.5S18.43 12 16.5 12 13 13.57 13 15.5 14.57 19 16.5 19Z"/>
      </svg>
    </div>
    <h1 class="title">AI Email Companion</h1>
    <p class="subtitle">Smart email assistance powered by AI</p>
  </div>

  <div class="popup-content">
    <div class="loading" id="loading" style="display: none;">
      <div class="loading-spinner"></div>
      <p>Loading settings...</p>
    </div>

    <div id="main-content">
      <ul class="feature-list">
        <li class="feature-item">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
          <div class="feature-text">
            <h3 class="feature-title">Auto Summarize</h3>
            <p class="feature-desc">Automatically summarize emails when opened</p>
          </div>
          <div class="toggle-switch" id="autoSummarize"></div>
        </li>

        <li class="feature-item">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24">
              <path d="M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"/>
            </svg>
          </div>
          <div class="feature-text">
            <h3 class="feature-title">Smart Replies</h3>
            <p class="feature-desc">Generate intelligent reply suggestions</p>
          </div>
          <div class="toggle-switch" id="smartReplies"></div>
        </li>

        <li class="feature-item">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24">
              <path d="M12 6.5c2.5 0 4.5 2 4.5 4.5s-2 4.5-4.5 4.5S7.5 13.5 7.5 11 9.5 6.5 12 6.5M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
            </svg>
          </div>
          <div class="feature-text">
            <h3 class="feature-title">Tone Assistant</h3>
            <p class="feature-desc">Help adjust tone and style of your emails</p>
          </div>
          <div class="toggle-switch" id="toneAssistance"></div>
        </li>

        <li class="feature-item">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24">
              <path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/>
            </svg>
          </div>
          <div class="feature-text">
            <h3 class="feature-title">Notifications</h3>
            <p class="feature-desc">Get notified about important emails</p>
          </div>
          <div class="toggle-switch" id="notifications"></div>
        </li>
      </ul>

      <div class="status-section">
        <div class="status-item">
          <span class="status-label">Extension Status</span>
          <div class="status-value">
            <span id="extensionStatus">Active</span>
            <div class="status-indicator active" id="statusIndicator"></div>
          </div>
        </div>

        <div class="status-item">
          <span class="status-label">Current Site</span>
          <span class="status-value" id="currentSite">Loading...</span>
        </div>

        <div class="status-item">
          <span class="status-label">Emails Processed</span>
          <span class="status-value" id="emailsProcessed">0</span>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-secondary" id="openSidebar">Open Assistant</button>
        <button class="btn btn-primary" id="refreshPage">Refresh</button>
      </div>
    </div>
  </div>

  <div class="footer">
    Made with ❤️ for better email productivity
  </div>

  <script src="popup.js"></script>
</body>
</html>